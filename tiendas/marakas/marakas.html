
  
  <!DOCTYPE html>
  <html lang="es">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
      <link rel="stylesheet" href="styles.css">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
      <title id="title-web"></title>
      <!-- Favicon -->
      <link id="favicon" rel="icon" type="image/png" sizes="16x16" href="#">
      <style>
      body {
          display: none; /* Oculta el contenido inicialmente */
      }
      </style>
    </head>
  <body>
  
      <div class="whatsapp-button">
        <a id="btnWhatsApp" href="#" target="_blank">
            <img src="../whatsapp-logo.png" alt="WhatsApp">
        </a>
      </div>
        <!--================================
            START HEADER AREA
        =================================-->
        <header  id="header">
          <div class="logo-header" >
              <a href="marakas.html">
                      <img id="logo-pc" src="#" alt="">
                      <img id="logo-mobile" src="#" alt="">
               </a>
          </div>
          <div class="searcher">
            <div class="input-group mb-3">
              <input  id="searchInput" type="text" class="form-control" placeholder="Buscar Producto..." aria-label="Recipient's username" aria-describedby="button-addon2" autocomplete="off">
              <ul style="display: none;" id="resultsList"></ul>

              <button  class="btn btn-primary btn-header" type="button" id="btnSearchInput">Buscar</button>
          </div>
          </div>
  
  
      </header>
      <!--================================
          END HEADER AREA
      =================================-->
      <!--================================
          START NAV-SLIDER AREA
      =================================-->
      <section  id="nav-slider-area">
        <div id="nav-header" >
            <nav  class="navbar navbar-expand-lg" >
              <div class="container-fluid">
                <a class="navbar-brand link-header" href="marakas.html">Home</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle Navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                  <ul class="navbar-nav">
                    <li class="dropdown">
                        <a class="nav-link link-header" href="#">Categorias  ‚ñº</a>
                        <div id="cat-display" class="dropdown-content">

                        </div>        
                    </li>
                    <div id="brand-display">

                    </div>
                    <li class="nav-item">
                      <a class="nav-link link-header" href="tienda.html">Tienda</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link link-header" href="contact.html">CONTACTO</a>
                    </li>
                  </ul>
                </div>
              </div>
            </nav>
            
            <div id="div-carrito"  >
            <!-- Bot√≥n de carrito con lista desplegable -->
            <div id="carrito" class="btn-header" onmouseover="mostrarListaCarrito()" onmouseout="ocultarListaCarrito()">
              <span id="cantidad-carrito" >(0)</span> <span id="carrito-logo">üõí</span> 
              
              <div id="lista-carrito">
                  <div id="titulo-de-lista">
                      <h3>Carrito de Compras</h3>
                  </div>
                  <div id="lista-productos">
  
                  </div>
                  <!-- Lista de productos en el carrito -->
                  <div id="mensaje-carrito-vacio">
                    <p>Tu carrito est√° vac√≠o.</p>
                    <a href="tienda.html">IR A TIENDA</a>
                  </div>
                  <div id="btnIniciarCompra">
                      <div class="mb-3">
                        <span>TOTAL:</span>
                        <span style="float: right;" id="total"></span>
                      </div>
                      <div>
                          <a href="checkout.html" style="float: right;"  class="btn btn-primary btnCheckout">Iniciar Compra</a>
                          <button style="float: left;background-color: red;"  onclick="limpiarCarrito()" class="btn btn-primary btn--lg">Limpiar</button>    
                      </div>
                  </div>
              </div>
          </div>
            </div>
          </div>
            <div id="carouselHeader" class="carousel slide" data-bs-ride="carousel">
              <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselHeader" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselHeader" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselHeader" data-bs-slide-to="2" aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#carouselHeader" data-bs-slide-to="3" aria-label="Slide 4"></button>
                <button type="button" data-bs-target="#carouselHeader" data-bs-slide-to="4" aria-label="Slide 5"></button>

              </div>
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img id="bannerHeader-1" src="#" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img id="bannerHeader-2" src="#" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img id="bannerHeader-3"  src="#" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img id="bannerHeader-4" src="#" class="d-block w-100" alt="...">
                </div>
                <div class="carousel-item">
                  <img id="bannerHeader-5" src="#" class="d-block w-100" alt="...">
                </div>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselHeader" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Anterior</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselHeader" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Siguiente</span>
              </button>
            </div>
      </section>
      <!--================================
          END NAV-SLIDER AREA
      =================================-->
      
      <!--================================
          START SHOPS LIST AREA
      =================================-->
      <section id="shops-list-area">
          <div class="banners">
            <img id="subBannerHeaders" src="#" class="d-block w-100" alt="...">
          </div>
          <div id="banner-categorias">
            <div id="banner-categorias-contenido">

              <div id="carrousel-banner-categorias" class="carousel slide" data-bs-ride="carousel">
                <div id="carousel-indicators-slider" class="carousel-indicators">

                </div>
                <div id="carousel-inner-catslider" class="carousel-inner">

                </div>
                <button class="carousel-control-prev cc" type="button" data-bs-target="#carrousel-banner-categorias" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Anterior</span>
                </button>
                <button class="carousel-control-next cc" type="button" data-bs-target="#carrousel-banner-categorias" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Siguiente</span>
                </button>
              </div>
            </div>
            <div>

            </div>
        </div>
  
  
      </section>
      <!--================================
          END SHOPS LIST AREA
      =================================-->
  
      <!--================================ 
          START FOOTER AREA
      =================================-->
      <footer id="footer-area">
          <div style="margin: 1%;" class="subfoot-t1">
            <p>¬© 2023 <a href="" class="linksFooter">marakas</a>. All rights reserved. Created by <a href="#" class="linksFooter">MyEcom</a>.</p>
          </div>
  
      </footer>
      <!--================================
          END FOOTER AREA
      =================================-->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
      <script type="module" src="js.js" ></script>
  
      <!--================================
          START SCRIPT BASE
      =================================-->
        <script>
          var price = localStorage.price;
          var prod = localStorage.prod;
          var titulo = localStorage.Titulo;
          window.onload = function(){
            
  
            obtenerProductosDesdeLocalStorage();
  
            agregarAlCarrito();
          }
  


              function getShortTitle(title) {
                      if (title.length > 15) title = title.substring(0, 20);
                      else return title;
                      return title + "...";
                  }
        </script>
        <script>
        //carrito
        //carrito 
let cantidadProductosEnCarrito = 0;



function mostrarListaCarrito() {
  const listaCarrito = document.getElementById('lista-carrito');
  listaCarrito.style.display = 'block';
  document.getElementById('total').textContent = "$"+total;
  document.getElementById('titulo-de-lista').style.display = cantidadProductosEnCarrito > 0 ? 'block' : 'none';
  document.getElementById('btnIniciarCompra').style.display = cantidadProductosEnCarrito > 0 ? 'block' : 'none';
  document.getElementById('mensaje-carrito-vacio').style.display = cantidadProductosEnCarrito === 0 ? 'block' : 'none';
}

function ocultarListaCarrito() {
  const listaCarrito = document.getElementById('lista-carrito');
  listaCarrito.style.display = 'none';
}


function limpiarCarrito(){
    localStorage.setItem('productosEnCarrito', '');
    location.reload();    
}

let productosEnCarrito = [];
var total = 0;

// Funci√≥n para obtener los productos desde el localStorage
function obtenerProductosDesdeLocalStorage() {
    const productosEnLocalStorage = localStorage.getItem('productosEnCarrito');
    const productosEnCarrito = productosEnLocalStorage ? JSON.parse(productosEnLocalStorage) : [];
    for (let index = 0; index < productosEnCarrito.length; index++) {
        const titulo =   productosEnCarrito[index]['nombre'];  
        const cantidad = productosEnCarrito[index]['cantidad']; 
        const price = productosEnCarrito[index]['precio'];

        const listaCarrito = document.getElementById('lista-productos');
        const listaCarritoPedido = document.getElementById('order-received');

        const nuevoItem = document.createElement('div');
        nuevoItem.className = 'item-carrito';
    
        const cantidadProducto = document.createElement('span');
        cantidadProducto.className = 'cantidad-producto';
        cantidadProducto.textContent = `${cantidad}`;
    


        const enlaceProducto = document.createElement('a');
        enlaceProducto.className = 'title-product';
        enlaceProducto.href = '#';
        enlaceProducto.textContent = getShortTitleCart(titulo);
    

        const precioProducto = document.createElement('span');
        precioProducto.className = 'precio-producto';
        let prodCant = price.replace('$', '');
        let prodCant1 = prodCant.replace('.', '');
        let precio = prodCant1

        precioProducto.textContent = `${precio}`;
        total = parseInt(total) + parseInt(precio);
        nuevoItem.appendChild(cantidadProducto);
        nuevoItem.appendChild(enlaceProducto);
        nuevoItem.appendChild(precioProducto);
        document.getElementById('total').textContent = "$"+total;
        
        // Supongamos que tienes un objeto llamado "miObjeto"
        var totalCheckOut = document.getElementById('total-checkout');

        // Verificar si el objeto existe
        if (totalCheckOut !== null && typeof totalCheckOut !== 'undefined') {
            // El objeto existe, realiza la acci√≥n que deseas
            totalCheckOut.textContent = "$"+total/2;
        } 


        if(listaCarritoPedido !== null && typeof listaCarritoPedido !== 'undefined'){
            if(window.getComputedStyle(listaCarritoPedido).display === 'block'){
                document.getElementById('lista-productos-pedido').appendChild(nuevoItem);
            } else {
                listaCarrito.appendChild(nuevoItem);

            }

        } else {
            listaCarrito.appendChild(nuevoItem);
        }
        cantidadProductosEnCarrito += cantidad;
        document.getElementById('cantidad-carrito').textContent = `(${cantidadProductosEnCarrito})`;
    
        cantidad.value = 1;

    }


    return productosEnLocalStorage ? JSON.parse(productosEnLocalStorage) : [];
}

function getShortTitle(title) {
    if (title.length > 15) title = title.substring(0, 20);
    else return title;
    return title + "...";
}

function getShortTitleCart(title) {
  if (title.length > 20) title = title.substring(0, 20);
  else return title;
  return title + "...";
}

function agregarAlCarrito(titulo, inputCant, price) {
    var cantidad = parseInt(inputCant, 10);
  if (cantidad > 0) {
    const listaCarrito = document.getElementById('lista-productos');
    const nuevoItem = document.createElement('div');
    nuevoItem.className = 'item-carrito';

    const cantidadProducto = document.createElement('span');
    cantidadProducto.className = 'cantidad-producto';
    cantidadProducto.textContent = `${cantidad}`;



    const enlaceProducto = document.createElement('a');
    enlaceProducto.href = '#';
    enlaceProducto.textContent = getShortTitleCart(titulo);

    const precioProducto = document.createElement('span');
    precioProducto.className = 'precio-producto';
    let prodCant = price.replace('$', '');
    let prodCant1 = prodCant.replace('.', '');
    let precio = prodCant1*cantidad

    precioProducto.textContent = `${precio}`;
    total = parseInt(total) + precio;
    nuevoItem.appendChild(cantidadProducto);
    nuevoItem.appendChild(enlaceProducto);
    nuevoItem.appendChild(precioProducto);

    listaCarrito.appendChild(nuevoItem);

    cantidadProductosEnCarrito += cantidad;
    document.getElementById('cantidad-carrito').textContent = `(${cantidadProductosEnCarrito})`;

    cantidad.value = 1;

    const nuevoProducto = {
        nombre: titulo,
        precio: "$"+ precio,
        cantidad: parseFloat(cantidad)  // Convertir el precio a n√∫mero
      };

      // Agregar el producto al array
      productosEnCarrito.push(nuevoProducto);

        // Obtener el array actual en el localStorage
        const carritoExistente = obtenerProductosDesdeLocalStorage();

        // Modificar el array (agregar un nuevo elemento)
        carritoExistente.push(nuevoProducto);
        // Guardar el array actualizado en el localStorage
        guardarProductosEnLocalStorage(carritoExistente);    

    mostrarListaCarrito();
  }

      // Funci√≥n para obtener el array desde el localStorage
      function obtenerProductosDesdeLocalStorage() {
        const arrayEnLocalStorage = localStorage.getItem('productosEnCarrito');
        return arrayEnLocalStorage ? JSON.parse(arrayEnLocalStorage) : [];
      }

    // Funci√≥n para guardar el array en el localStorage
    function guardarProductosEnLocalStorage(carritoExistente) {
        console.log(JSON.stringify(carritoExistente));
        localStorage.setItem('productosEnCarrito', JSON.stringify(carritoExistente));
      }  
}




        // Funci√≥n que asigna el evento de clic a todos los enlaces con la clase "miClase"
        function goToCat() {
          var Categoria = event.target.innerHTML;

          localStorage.titleCat = Categoria; 
          window.location = "product-category.html";
        }

                // Funci√≥n que asigna el evento de clic a todos los enlaces con la clase "miClase"
        function goToBrand() {
          var brand = event.target.innerHTML;

          localStorage.titleBrand = brand; 
          window.location = "product-brand.html";
        }

      </script>
      <!--================================
          END SCRIPT BASE
      =================================-->
      
  </body>
  </html>
  