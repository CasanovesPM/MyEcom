


  <!DOCTYPE html>
  <html lang="es">
  
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title id="title-web"></title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>


    <!-- Favicon -->
    <link id="favicon" rel="icon" type="image/png" sizes="16x16" href="#">
    <style>
       body {
           display: none; /* Oculta el contenido inicialmente */
             }
     </style>
  </head>
  
  <body id="shopList">
  
    <div class="whatsapp-button">
      <a id="btnWhatsApp" href="#" target="_blank">
          <img src="../whatsapp-logo.png" alt="WhatsApp">
      </a>
    </div>
    <!--================================
        START HEADER AREA
    =================================-->
    <header style="background-color: #192223;" id="header">
        <div class="logo-header" >
            <a href="Yami.html">
                    <img id="logo-pc" src="#" alt="">
                    <img id="logo-mobile" src="#" alt="">
             </a>
        </div>
        <div class="searcher">
         <div class="input-group mb-3">
             <input id="searchInput" type="text" class="form-control" placeholder="Buscar Producto..."
                 aria-label="Recipient's username" aria-describedby="button-addon2" autocomplete="off">
             <ul style="display: none;" id="resultsList"></ul>

             <button class="btn btn-primary btn-header" type="button" id="btnSearchInput">Buscar</button>
         </div>
     </div>


    </header>
    <!--================================
        END HEADER AREA
    =================================-->
     <!--================================
         START NAV-SLIDER AREA
     =================================-->
     <section  id="nav-slider-area">
       <div id="nav-header" >
         <nav  class="navbar navbar-expand-lg" >
           <div class="container-fluid">
             <a class="navbar-brand link-header" href="Yami.html">Home</a>
             <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle Navigation">
             <span class="navbar-toggler-icon"></span>
             </button>
             <div class="collapse navbar-collapse" id="navbarNavDropdown">
               <ul class="navbar-nav">
                 <li class="dropdown">
                     <a class="nav-link link-header" href="#">Categorias  ▼</a>
                     <div id="cat-display" class="dropdown-content">

                     </div>        
                 </li>
                 <div id="brand-display">

                 </div>
                 <li class="nav-item">
                   <a class="nav-link link-header" href="tienda.html">Tienda</a>
                 </li>
                 <li class="nav-item">
                   <a class="nav-link link-header" href="contact.html">CONTACTO</a>
                 </li>
               </ul>
             </div>
           </div>
         </nav>

         </div>

     </section>
     <!--================================
         END NAV-SLIDER AREA
     =================================-->

    <!--================================
          START CHECKOUT AREA
      =================================-->
    <section style="padding: 3% ; background-color: whitesmoke;">
      <div id="checkout-form" class="checkout-form">
        <div class="form-data">
          <h3 id="tittle-form-data">DETALLES DE FACTURACION</h3>
          <div class="form-data-values mb-3">
            <div class="col-md-6">
              <h5>Nombre</h5>
              <input id="name" type="text" placeholder="Tu Nombre Aqui">
            </div>
            <div class="col-md-6">
              <h5>Apellido</h5>
              <input id="lastname" type="text" placeholder="Tu Apellido Aqui">
            </div>
          </div> 
          <div class="form-data-values mb-3">
            <div class="col-md-6">
              <h5>Domicilio</h5>
              <input id="country" type="text" placeholder="Tu Domicilio Aqui">
            </div>
            <div class="col-md-6">
              <h5>Provincia</h5>
              <input id="province" type="text" placeholder="Tu Provincia Aqui">
            </div>
          </div>
          <div class="form-data-values mb-3">
            <div class="col-md-6">
              <h5>Ciudad</h5>
              <input id="city" type="text" placeholder="Tu Ciudad Aqui">
            </div>
            <div class="col-md-6">
              <h5>Codigo Postal</h5>
              <input id="postalCode" type="number" placeholder="5960">
            </div>
          </div>
          <div class="form-data-values mb-3">
            <div class="col-md-6">
              <h5>Telefono</h5>
              <input id="phone" type="text" placeholder="3415847965">
            </div>
            <div class="col-md-6">
              <h5>Email</h5>
              <input id="email" type="text" placeholder="alguien@gmail.com">
            </div>
          </div>
          <div style="width: 100%;" class=" mb-3">
            <h5>Notas del Pedido(Opcional)</h5>
            <textarea id="references" style="width: 100%;" name="textarea"  rows="10" cols="50"
              placeholder="Notas sobre tu pedido, por ejemplo, notas especiales de entrega."></textarea>
          </div>
        </div>
  
        <div class="form-cart">
          <h3 id="tittle-form-data" style="font-weight: bold;">Tu Pedido Nro <span id="pedidoNro"></span></h3>
  
          <div style="border-bottom: solid 1px grey; display: flex;">
            <h5>Productos</h5>
            <h5 style="margin-left: 38%;">Subtotal</h5>
          </div>
          <div id="lista-productos">
  
          </div>
          <div style="padding: 5%; border-bottom: solid 1px grey;">
            <span style="font-weight: bold;">TOTAL:</span>
            <span style="float: right;" id="total"></span>
          </div>
  
          <div id="subtotal-envio-total">
            <p style="display: none;" id="cantidad-carrito"></p>
            <div style="padding: 5%; height: auto;  border-bottom: solid 1px grey;" class="mb-3">
              <span style="float: left; font-weight: bold; margin-top: 1%;" class="mb-3">ENVIO</span>
  
              <div style="margin-left: 25%;">
  
                <select id="typeEnvio" class="form-control" placeholder="Escribe tu marca" aria-label="Username"
                aria-describedby="basic-addon1">
                  <option value="">Selecciona el Tipo de Envio</option>
                  <option value="Envio A Domicilio">Envio A Domicilio</option>
                  <option value="Retiro por el Local">Retiro por el Local.</option>
                </select>
              </div>
  
            </div>
          </div>
          <div style="padding: 5%; border-bottom: solid 1px grey;" id="opciones-de-pago">
            <span style="float: left; font-weight: bold; margin-top: 1%;" class="mb-3">PAGO</span>
  
            <div style="margin-left: 25%;">
              <select id="typePago" class="form-control" placeholder="Escribe tu marca" aria-label="Username"
              aria-describedby="basic-addon1">
                <option value="">Selecciona el Tipo de Pago</option>
                <option value="Efectivo">Efectivo</option>
                <option value="Transferencia Bancaria">Transferencia Bancaria</option>
                <option value="MercadoPago">MercadoPago</option>
              </select>
            </div>
          </div>
          <div style="margin-top: 1%; padding: 5%; text-align: center;" id="realizar-compra">
            <p>Sus datos personales se utilizarán para procesar su pedido, respaldar su experiencia en este sitio web y
              para otras finalidades descritas en nuestra <a href="#">política de privacidad.</a></p>
            <button id="realizar-pedido" style="background-color:#192223;" class="btn btn-primary btn--lg">REALIZAR
              PEDIDO</button>
          </div>
        </div>
      </div>
      <div style="display: none;" id="order-received" >
        <div id="gracias-checkout" class="mb-3">
          <img id="logo-pcor" src="#" alt="">

          <h3 id="PedidoPCE">Pedido procesado con exito, muchas gracias!</h3>
        </div>
        <div id="info-pedido" class="mb-3">
          <div>
  
            <p>NUMERO DEL PEDIDO:</p>
  
            <span id="num-pedido">10995</span>
          </div>
          <div>
  
            <p>FECHA Y HORA:</p>
  
            <span id="fecha-pedido">13/10/2023</span>
          </div>
          <div>
  
            <p>EMAIL:</p>
  
            <span id="email-comprador">eureka.tiendas@gmail.com</span>
          </div>
          <div>
  
            <p>TOTAL:</p>
  
            <span style="color: red;" id="total-pedido">$10.000</span>
          </div>
          <div>
  
            <p>METODO DE PAGO:</p>
  
            <span id="tipo-pago-pedido">Transferencia Bancaria</span>
          </div>
        </div>
        <div id="header-detalles-pedido">
          <span style="color: white; font-weight: bold; font-size: 200%;" >DETALLES DEL PEDIDO</span>
        </div>
        <div id="detalles-pedido" class="mb-3">
  
          <div id="direccion-facturacion">
            <div>
              <span id="nombre-apellido" for=""></span>
            </div>
            <div>
              <span id="pais" for=""></span>
            </div>
            <div>
              <span id="provincia" for=""></span>
            </div>
            <div>
              <span id="ciudad" for=""></span>
            </div>
            <div>
              <span id="codigo-postal" for=""></span>
            </div>
            <div>
              <span id="telefono" for=""></span>
            </div>
            <div>
              <span id="correo-electronico" for=""></span>
            </div>
            <div>
              <span id="notas-de-pedido" for=""></span>
            </div>
          </div> 
            <div id="lista-productos-pedido">
  
            </div>
        </div>
        <div id="total-btn">
          <div style="width: 100%;" >
            <span>TOTAL:</span>
            <span id="total-checkout"></span>
          </div>
        </div>

        <div style="width: 100%; text-align: center; padding: 1%;" >
          <h3>Powered By:</h3><a href="www.myecom.com.ar"><h3 style="font-weight: bold; color: black;">www.myecom.com.ar</h3></a>

          <a id="btnEnviarPedido" class="btn btn-primary btn-header" >DESCARGAR PEDIDO!</a>
        </div>
      </div>
      <div style="display: none;" id="enviarAWhats">
        <div id="gracias-checkout" class="mb-3">
          <img id="logo-pcor" src="#" alt="">
          <h1>*ATENCION*</h1>
          <h2>La confirmacion se efectua al enviar el mensaje por whatsapp al vendedor.</h2>
          <h3>Tu pedido se proceso con exito, ahora enviale un mensaje al vendedor CONFIRMANDO y reenviarle la imagen del pedido que se descargo en tu dispositivo!</h3>
          
          <a id="btnEnviarAWhats" class="btn btn-primary btn-header" >ENVIAR PEDIDO AL VENDEDOR</a>

        </div>
      </div>
    </section>
    <!--================================
          END CHECKOUT AREA
      =================================-->
  
      <!--================================ 
          START FOOTER AREA
      =================================-->
      <footer id="footer-area">
          <div style="margin: 1%;" class="subfoot-t1">
            <p>© 2023 <a href="">Yami Theme</a>. All rights reserved. Created by <a href="#">Eureka.ar</a>.</p>
          </div>
  
      </footer>
      <!--================================
          END FOOTER AREA
      =================================-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"></script>
    <script type="module" src="js.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
    <script>
  
      window.onload = function () {

        obtenerProductosDesdeLocalStorage();
      }
      const realizarPedido = document.getElementById('realizar-pedido');
      const name1 = document.getElementById('name');
      const lastName = document.getElementById('lastname');
      const country = document.getElementById('country');
      const province = document.getElementById('province');
      const city = document.getElementById('city');
      const postalCode = document.getElementById('postalCode');
      const phoneNumber = document.getElementById('phone');
      const email = document.getElementById('email');
      const references = document.getElementById('references');

        //PASO PREVIO A ENVIAR AL VENDEDOR 
        const numPedido = document.getElementById('num-pedido');
        const fechaPedido = document.getElementById('fecha-pedido');
        const emailPedido = document.getElementById('email-comprador');
        const pagoPedido = document.getElementById('tipo-pago-pedido');

  
      realizarPedido.addEventListener('click', function () {
        if (name1.value == "" || lastName.value == "" ||
          country.value == "" || province.value == "" || city.value == "" ||
          postalCode.value == "" || phoneNumber.value == "" || email.value == "" ||
          references.value == "") {
          swal({
            title: "No Puedes Dejar Casilleros Vacios!",
            icon: "warning",
            button: "OK!",
          });
        } else {
          swal({
            title: "Chequeaste la info?",
            icon: "warning",
            buttons: true,
            dangerMode: true,
          })
            .then((willDelete) => {
              if (willDelete) {
                swal("Pedido Procesado con Exito!", {
                  icon: "success",
                }).then(function () {
  
                  const nombre = document.getElementById('name').value;
                  const apellido = document.getElementById('lastname').value;
                  const pais = document.getElementById('country').value;
                  const provincia = document.getElementById('province').value;
                  const ciudad = document.getElementById('city').value;
                  const codigoPostal = document.getElementById('postalCode').value;
                  const telefono = document.getElementById('phone').value;
                  const correoElectronico = document.getElementById('email').value;
                  const notasPedido = document.getElementById('references').value;


                  document.getElementById('nombre-apellido').innerHTML = "Nombre y Apellido: " + nombre +" "+ apellido ;
                  document.getElementById('pais').innerHTML = "Domicilio: " + pais ;
                  document.getElementById('provincia').innerHTML = "Provincia: " + provincia ;
                  document.getElementById('ciudad').innerHTML = "Ciudad: " + ciudad ;
                  document.getElementById('codigo-postal').innerHTML = "Codigo Postal: " +  codigoPostal ;
                  document.getElementById('telefono').innerHTML = "Telefono: " +  telefono ;
                  document.getElementById('correo-electronico').innerHTML = "Email: " +  correoElectronico ;
                  document.getElementById('notas-de-pedido').innerHTML = "Notas: " +  notasPedido ;

                  const pagoPedido = document.getElementById('typePago').value;
                  const envioPedido = document.getElementById('typeEnvio').value;

                  var fechaActual = new Date();

                  // Obtén el año, mes, día, hora y minutos
                  var año = fechaActual.getFullYear();
                  var mes = fechaActual.getMonth() + 1; // Se suma 1 porque los meses van de 0 a 11
                  var dia = fechaActual.getDate();
                  var hora = fechaActual.getHours();
                  var minutos = fechaActual.getMinutes();

                  // Formatea la fecha y hora como cadenas de texto
                  fechaPedido.textContent = `${hora}:${minutos}`+" "+`${dia}/${mes}/${año}`;


                  emailPedido.textContent = correoElectronico;
                  pagoPedido.textContent = pagoPedido;

                  document.getElementById('checkout-form').style.display = "none";
                  document.getElementById('order-received').style.display = "block";
                  obtenerProductosDesdeLocalStorage()
                });
  
              } else {
                swal({
                  title: "Dale un vistazo Nuevamente!",
                  icon: "warning",
                });
              }
            });
        }
      });



function mostrarListaCarrito() {
  const listaCarrito = document.getElementById('lista-carrito');
  listaCarrito.style.display = 'block';
  document.getElementById('total').textContent = "$"+total;
  document.getElementById('titulo-de-lista').style.display = cantidadProductosEnCarrito > 0 ? 'block' : 'none';
  document.getElementById('btnIniciarCompra').style.display = cantidadProductosEnCarrito > 0 ? 'block' : 'none';
  document.getElementById('mensaje-carrito-vacio').style.display = cantidadProductosEnCarrito === 0 ? 'block' : 'none';
}

function ocultarListaCarrito() {
  const listaCarrito = document.getElementById('lista-carrito');
  listaCarrito.style.display = 'none';
}


function limpiarCarrito(){
    localStorage.setItem('productosEnCarrito', '');
    location.reload();    
}

let productosEnCarrito = [];
var total = 0;
let cantidadProductosEnCarrito = 0;

// Función para obtener los productos desde el localStorage
function obtenerProductosDesdeLocalStorage() {
    const productosEnLocalStorage = localStorage.getItem('productosEnCarrito');
    const productosEnCarrito = productosEnLocalStorage ? JSON.parse(productosEnLocalStorage) : [];
    for (let index = 0; index < productosEnCarrito.length; index++) {
        const titulo =   productosEnCarrito[index]['nombre'];  
        const cantidad = productosEnCarrito[index]['cantidad']; 
        const price = productosEnCarrito[index]['precio'];

        const listaCarrito = document.getElementById('lista-productos');
        const listaCarritoPedido = document.getElementById('order-received');

        const nuevoItem = document.createElement('div');
        nuevoItem.className = 'item-carrito';
    
        const cantidadProducto = document.createElement('span');
        cantidadProducto.className = 'cantidad-producto';
        cantidadProducto.textContent = `${cantidad}`;
    


        const enlaceProducto = document.createElement('a');
        enlaceProducto.className = 'title-product';
        enlaceProducto.href = '#';
        enlaceProducto.textContent = getShortTitleCart(titulo);
    

        const precioProducto = document.createElement('span');
        precioProducto.className = 'precio-producto';
        let prodCant = price.replace('$', '');
        let prodCant1 = prodCant.replace('.', '');
        let precio = prodCant1

        precioProducto.textContent = `${precio}`;
        total = parseInt(total) + parseInt(precio);
        nuevoItem.appendChild(cantidadProducto);
        nuevoItem.appendChild(enlaceProducto);
        nuevoItem.appendChild(precioProducto);
        document.getElementById('total').textContent = "$"+total;
        
        // Supongamos que tienes un objeto llamado "miObjeto"
        var totalCheckOut = document.getElementById('total-checkout');
        var totalPedido = document.getElementById('total-pedido');

        // Verificar si el objeto existe
        if (totalCheckOut !== null && typeof totalCheckOut !== 'undefined') {
            // El objeto existe, realiza la acción que deseas
            totalCheckOut.textContent = "$"+total/2;
            totalPedido.textContent = "$"+total/2;

        } 


        if(listaCarritoPedido !== null && typeof listaCarritoPedido !== 'undefined'){
            if(window.getComputedStyle(listaCarritoPedido).display === 'block'){
                document.getElementById('lista-productos-pedido').appendChild(nuevoItem);
            } else {
                listaCarrito.appendChild(nuevoItem);

            }

        } else {
            listaCarrito.appendChild(nuevoItem);
        }
        cantidadProductosEnCarrito += cantidad;
        document.getElementById('cantidad-carrito').textContent = `(${cantidadProductosEnCarrito})`;
    
        cantidad.value = 1;

    }


    return productosEnLocalStorage ? JSON.parse(productosEnLocalStorage) : [];
}

function getShortTitle(title) {
    if (title.length > 15) title = title.substring(0, 20);
    else return title;
    return title + "...";
}

function getShortTitleCart(title) {
  if (title.length > 20) title = title.substring(0, 20);
  else return title;
  return title + "...";
}

function agregarAlCarrito(titulo, inputCant, price) {
    var cantidad = parseInt(inputCant, 10);
  if (cantidad > 0) {
    const listaCarrito = document.getElementById('lista-productos');
    const nuevoItem = document.createElement('div');
    nuevoItem.className = 'item-carrito';

    const cantidadProducto = document.createElement('span');
    cantidadProducto.className = 'cantidad-producto';
    cantidadProducto.textContent = `${cantidad}`;



    const enlaceProducto = document.createElement('a');
    enlaceProducto.href = '#';
    enlaceProducto.textContent = getShortTitleCart(titulo);

    const precioProducto = document.createElement('span');
    precioProducto.className = 'precio-producto';
    let prodCant = price.replace('$', '');
    let prodCant1 = prodCant.replace('.', '');
    let precio = prodCant1*cantidad

    precioProducto.textContent = $`${precio}`;
    total = parseInt(total) + precio;
    nuevoItem.appendChild(cantidadProducto);
    nuevoItem.appendChild(enlaceProducto);
    nuevoItem.appendChild(precioProducto);

    listaCarrito.appendChild(nuevoItem);

    cantidadProductosEnCarrito += cantidad;
    document.getElementById('cantidad-carrito').textContent = `(${cantidadProductosEnCarrito})`;

    cantidad.value = 1;

    const nuevoProducto = {
        nombre: titulo,
        precio: "$"+ precio,
        cantidad: parseFloat(cantidad)  // Convertir el precio a número
      };

      // Agregar el producto al array
      productosEnCarrito.push(nuevoProducto);

        // Obtener el array actual en el localStorage
        const carritoExistente = obtenerProductosDesdeLocalStorage();

        // Modificar el array (agregar un nuevo elemento)
        carritoExistente.push(nuevoProducto);
        // Guardar el array actualizado en el localStorage
        guardarProductosEnLocalStorage(carritoExistente);    

    mostrarListaCarrito();
  }

      // Función para obtener el array desde el localStorage
      function obtenerProductosDesdeLocalStorage() {
        const arrayEnLocalStorage = localStorage.getItem('productosEnCarrito');
        return arrayEnLocalStorage ? JSON.parse(arrayEnLocalStorage) : [];
      }

    // Función para guardar el array en el localStorage
    function guardarProductosEnLocalStorage(carritoExistente) {
        console.log(JSON.stringify(carritoExistente));
        localStorage.setItem('productosEnCarrito', JSON.stringify(carritoExistente));
      }  
}
              // Función que asigna el evento de clic a todos los enlaces con la clase "miClase"
              function goToCat() {
          var Categoria = event.target.innerHTML;

          localStorage.titleCat = Categoria; 
          window.location = "product-category.html";
        }

                // Función que asigna el evento de clic a todos los enlaces con la clase "miClase"
        function goToBrand() {
          var brand = event.target.innerHTML;

          localStorage.titleBrand = brand; 
          window.location = "product-brand.html";
        }




    </script>
  </body>
  
  </html>
  
  